# 常用命令

### 查看日志
+ 实时查看并筛选日志
```shell
tail -f xx.log |grep 'xx'
```
+ 查看指定时间范围内的日志
```shell
# 查看2022-01-01至2022-01-31的日志（假设日志按日期分割）
cat logs/2022-01-*.log

# 或者使用grep筛选特定时间段内的时间戳
grep '2022-01-[01-31]' access.log

# 使用awk处理包含时间戳的日志
awk -v start='2022-01-01 00:00:00' -v end='2022-01-31 23:59:59' '$0 >= start && $0 <= end' time-stamped-logfile.log
```
+ 查看关键词最后100条
```shell
grep -n  "计划:\[7334378316508233740\]" console-2024-02-21.log |tail -n 100

grep -n  "计划:\[7337200837808144403\]" console-2024-02-23.log |tail -n 100
```

### 日志文件清理
+ 清理日志文件
```shell
#清理系统日志目录下的所有日志文件（需谨慎执行，可能会导致系统服务出现问题）：
 sudo rm -rf /var/log/*.log

清除过期日志
 sudo find /var/log/ -type f -name "*.log" -mtime +30 -exec truncate -s 0 {} \;
```

### 日志统计
+ 统计字符串出现次数
```shell
# 从xx.log文件中提取出包含'xx'的所有行，并使用-o选项只显示匹配的文本部分。然后，使用wc命令的-l选项计算匹配行的数量。
grep -o 'xx' xx.log |wc -l
```

### 命令解析
```shell
# 统计日志中每个IP地址出现的次数
```
grep -c 和 grep -o 是 grep 命令中的两个不同选项，它们在处理文本搜索时具有不同的功能：  - grep -c 'pattern' file：该选项用于统计文件中包含匹配模式（pattern）的行数。它会输出一个数字，表示有多少行与给定的模式相匹配。  - grep -o 'pattern' file：而 -o 选项则用于只输出匹配到的模式部分本身，而不是整行。这意味着对于每一行如果有多个匹配项，那么每找到一个匹配项就会输出一次，而且不包括匹配项之外的任何文本。  总结来说，-c 计算匹配行的总数，而 -o 则是提取并显示所有匹配到的模式实例。
